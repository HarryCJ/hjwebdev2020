{"version":3,"sources":["redux/reducers/siteReducer.js","redux/reducers/authReducer.js","redux/reducers/addressReducer.js","redux/reducers/offlineReducer.js","redux/reducers/checkReducer.js","redux/reducers/userReducer.js","redux/reducers/reportReducer.js","redux/reducers/settingsReducer.js","redux/reducers/index.js","redux/actions/types.js","redux/store.js","components/DelayLink.js","redux/actions/siteActions.js","components/ProjectTile.js","components/Page.js","components/BackPageButton.js","ProjectsSPGPage.js","ProjectsPage.js","projects/SMProjectPage.js","components/pswpElement.js","projects/SABProjectPage.js","App.js","serviceWorker.js","index.js"],"names":["createBrowserHistory","initialState","history","routes","home","projects","projectsSAB","projectsAB","projectsSamAndMax","projectsSPG","about","page_opacity","page_left","pageContentSelector","authKey","window","localStorage","getItem","loginError","currentID","parseInt","addressMessages","addresses","getMessageID","id","setItem","setOfflineQueue","offlineQueue","localForage","JSON","stringify","console","log","navigator","serviceWorker","ready","then","swRegistration","sync","register","onlineCount","offlineFileCount","savedFilesToDelete","stringifyCheck","validatedData","filesToDelete","Object","keys","forEach","key","roomItem","comments","commentItem","image","length","newImages","url","push","item","checkMessages","checks","deleteAutoSave","checkID","result","forageComments","a","imageItem","saveItem","parse","epFiles","concat","rooms","roomFiles","removeItem","getFilesToDelete","userMessages","userList","createUserErrors","showCreateUserModal","reportMessages","reports","settingsMessages","hiddenElement","settings","midterm_declaration","disclaimer","room_names","default_rooms","isLoading","combineReducers","site","state","action","type","payload","auth","address","clearResults","params","page","assign","slice","results","i","message","splice","filter","id_array","removeID","offline","Array","from","status","check","user","report","middleware","thunk","store","createStore","rootReducer","applyMiddleware","DelayLink","props","handleClick","e","replace","to","delay","onDelayStart","onDelayEnd","defaultPrevented","preventDefault","timeout","setTimeout","this","clearTimeout","onClick","React","Component","defaultProps","contextTypes","Link","setPageOpacity","value","offsetX","dispatch","ProjectTile","projectURL","className","src","imgURL","alt","imgAlt","title","connect","Page","style","opacity","transform","inner","BackPageButton","ProjectsSPGPage","Col","sm","href","ProjectsPage","projectPageSelector","join","setPageContentSelector","SMProjectPage","pswpElement","tabindex","role","aria-hidden","SABProjectPage","initialiseGallery","pswpEle","document","querySelector","gallery","PhotoSwipe","PhotoSwipeUI_Default","description","w","h","maxSpreadZoom","focus","escKey","modal","pinchToClose","closeOnScroll","closeOnVerticalDrag","index","addCaptionHTMLFn","captionEl","isFake","hasTitle","hasDesc","children","innerHTML","innerText","listen","_offset","r","getBoundingClientRect","x","left","y","top","isDown","preventObj","prevent","init","thisComp","requestAnimationFrame","Row","OverlayTrigger","placement","show","hide","overlay","Tooltip","height","toggleAlignCenter","isCenter","centerRow","offsetTop","offsetHeight","App","AnimatePageContent","pageContent","anime","targets","duration","easing","scale","stagger","querySelectorAll","textWrapper","text","dangerouslySetInnerHTML","__html","setActive","classList","remove","target","add","currentPage","selectors","logo","titleLetters","subTitle","subTitleLetters","links","paths","name","setState","find","path","location","hash","start","paddingTop","nextProps","Container","Boolean","hostname","match","rootElement","getElementById","ReactDOM","render","registration","unregister"],"mappings":"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","file":"static/js/main.572985af.chunk.js","sourcesContent":["import { SET_PAGE_OPACITY, SET_PAGE_CONTENT_SELECTOR } from '../actions/types'\r\n\r\nimport { createBrowserHistory } from 'history';\r\nconst history = createBrowserHistory()\r\n\r\nconst initialState = {\r\n\thistory: createBrowserHistory(),\r\n\troutes: {\r\n\t  home: \"#\",\r\n\t  projects: \"#projects\",\r\n\t  projectsSAB: \"#projects-sab\",\r\n\t  projectsAB: \"#projects-ab\",\r\n\t  projectsSamAndMax: \"#projects-samandmax\",\r\n\t  projectsSPG: \"#projects-sohamplaygroup\",\r\n\t  about: \"#about\",\r\n\t},\r\n\tpage_opacity: 1,\r\n\tpage_left: 0,\r\n\tpageContentSelector: '', \r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n\t// console.log(\"action.payload\", action.payload)\r\n\tswitch(action.type) {\r\n\t\tcase SET_PAGE_OPACITY:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpage_opacity: action.page_opacity,\r\n\t\t\t\tpage_left:action.page_left,\r\n\t\t\t}\r\n\t\tcase SET_PAGE_CONTENT_SELECTOR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpageContentSelector: action.payload,\r\n\t\t\t}\r\n\t\t// case SET_CURRENT_ID:\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\tcurrentID: action.payload,\r\n\t\t// \t}\r\n\t\t// \t/* falls through */\r\n\t\t// case LOGIN:\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\tloginError: false,\r\n\t\t// \t\tauthKey: action.payload,\r\n\t\t// \t}\r\n\t\t// \t falls through \r\n\t\t// case LOGOUT:\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\tloginError: false,\r\n\t\t// \t\tauthKey: null,\r\n\t\t// \t}\r\n\t\t// \t/* falls through */\r\n\t\t// case LOGIN_ERROR:\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\tloginError: action.payload,\r\n\t\t// \t}\r\n\t\t// \t/* falls through */\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\r\n\t}\r\n}","import { LOGIN, LOGOUT, LOGIN_ERROR, SET_CURRENT_ID } from '../actions/types'\r\n\r\nconst initialState = {\r\n\tauthKey: window.localStorage.getItem('authKey'),\r\n\tloginError: false,\r\n\tcurrentID: parseInt(window.localStorage.getItem('currentID')),\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n\tconsole.log(\"action.payload\", action.payload)\r\n\tswitch(action.type) {\r\n\t\tcase SET_CURRENT_ID:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrentID: action.payload,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase LOGIN:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloginError: false,\r\n\t\t\t\tauthKey: action.payload,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase LOGOUT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloginError: false,\r\n\t\t\t\tauthKey: null,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase LOGIN_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloginError: action.payload,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\r\n\t}\r\n}","import { FETCH_ADDRESSES, CREATE_ADDRESS, REMOVE_MESSAGE, EDIT_ADDRESS, DELETE_ADDRESS, MASS_DELETE_ADDRESS, ADD_QUEUE_MESSAGE, ADD_ADDRESS_SERVER_ERROR_MESSAGE } from '../actions/types'\r\n\r\nconst initialState = {\r\n    addressMessages: [],\r\n\taddresses: {},\r\n}\r\n\r\nfunction getMessageID(){\r\n\tlet id = parseInt(window.localStorage.getItem('message-id') || \"0\")\r\n\twindow.localStorage.setItem('message-id', id+1)\r\n\treturn id\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n\tconsole.log(\"action\", action)\r\n\tlet addresses = null\r\n\tlet addressMessages = null\r\n\tswitch(action.type) {\r\n\t\tcase FETCH_ADDRESSES:\r\n\t\t\t// let newAddresses = state.addresses\r\n\t\t\t// newAddresses[action.page] = action.payload\r\n\t\t\tif (action.clearResults === true){\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\taddresses: {\r\n\t\t\t\t        [action.params.page]: action.payload\r\n\t\t\t\t      },\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\taddresses: Object.assign({}, state['addresses'], {\r\n\t\t\t\t        [action.params.page]: action.payload\r\n\t\t\t\t      }),\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase CREATE_ADDRESS:\r\n\t\t\t// addresses = Object.assign({}, state['addresses'])\r\n\t\t\t// Object.keys(addresses).forEach((page) => {\r\n\t\t\t// \taddresses[page].results.unshift(action.payload.item)\r\n\t\t\t// })\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t// addresses: addresses,\r\n\t\t\t\taddressMessages: state['addressMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase EDIT_ADDRESS:\r\n\t\t\t// Update existing addresses\r\n\t\t\taddresses = Object.assign({}, state['addresses'])\r\n\t\t\tObject.keys(addresses).forEach((page) => {\r\n\t\t\t\taddresses[page].results.forEach((item, i) => {\r\n\t\t\t\t\tif (item.id === action.payload.item.id)\taddresses[page].results[i] = action.payload.item\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t// Update messages\r\n\t\t\taddressMessages = state['addressMessages']\r\n\t\t\taddressMessages.forEach((message) => {\r\n\t\t\t\tif (message.item && message.item.id && message.item.id === action.payload.item.id){\r\n\t\t\t\t\tmessage.item = action.payload.item\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddresses: addresses,\r\n\t\t\t\taddressMessages: addressMessages.concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase DELETE_ADDRESS:\r\n\t\t\taddresses = Object.assign({}, state['addresses'])\r\n\t\t\tObject.keys(addresses).forEach((page) => {\r\n\t\t\t\taddresses[page].results.forEach((item, i) => {\r\n\t\t\t\t\tif (item.id === action.payload.item.id)\taddresses[page].results.splice(i, 1)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\taddressMessages = state['addressMessages'].filter(message =>!message.item || message.item.id !== action.payload.item.id)\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddresses: addresses,\r\n\t\t\t\taddressMessages: addressMessages.concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase MASS_DELETE_ADDRESS:\r\n\t\t\taddresses = Object.assign({}, state['addresses'])\r\n\t\t\taddressMessages = state['addressMessages']\r\n\t\t\taction.payload.id_array.forEach(removeID => {\r\n\t\t\t\taddressMessages = addressMessages.filter(message => !message.item || message.item.id !== removeID)\r\n\t\t\t\tObject.keys(addresses).forEach((page) => {\r\n\t\t\t\t\taddresses[page].results.forEach((item, i) => {\r\n\t\t\t\t\t\tif (removeID === item.id) addresses[page].results.splice(i, 1)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddresses: addresses,\r\n\t\t\t\taddressMessages: addressMessages.concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase REMOVE_MESSAGE:\r\n\t\t\taddressMessages = state['addressMessages'].filter(message => message.id !== action.payload)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddressMessages,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase ADD_QUEUE_MESSAGE:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddressMessages: state['addressMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase ADD_ADDRESS_SERVER_ERROR_MESSAGE:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddressMessages: state['addressMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t\t// case FETCH_SITEOPTIONS:\r\n\r\n\t}\r\n}","import { PUSH_OFFLINE_QUEUE, REMOVE_OFFLINE_QUEUE_ITEM, SET_QUEUE_ITEM_PENDING, UNSET_QUEUE_ITEM_PENDING, HANDLE_ONLINE, REFRESH_OFFLINE_QUEUE, PUSH_ADDRESS_TO_OFFLINE_QUEUE, PUSH_CHECK_TO_OFFLINE_QUEUE, SAVE_CHECK } from '../actions/types'\r\nimport localForage from \"localforage\";\r\n\r\nfunction setOfflineQueue(offlineQueue){\r\n\r\n\tlocalForage.setItem('offlineQueue', JSON.stringify(offlineQueue))\r\n\r\n\tconsole.log(\"registering sync\")\r\n\tnavigator.serviceWorker.ready.then(function(swRegistration) {\r\n\t\tconsole.log(\"registering sync ok\")\r\n\t\tif (swRegistration.sync){\r\n\t \t\treturn swRegistration.sync.register('onlineSync');\r\n\t\t}\r\n\t});\r\n}\r\n\r\nconst initialState = {\r\n\tofflineQueue: [],\r\n\tonlineCount: 0,\r\n\tofflineFileCount: 0,\r\n\tsavedFilesToDelete: [],\r\n}\r\n\r\nfunction stringifyCheck(validatedData, offlineFileCount){\r\n\r\n\t// delete payload.validatedData.history\r\n\tlet filesToDelete = []\r\n\r\n\tObject.keys(validatedData).forEach(key => {\r\n\t\tif (validatedData[key]){\r\n\t\t\tif (key === \"rooms\"){\r\n\t\t\t\tvalidatedData[key].forEach(roomItem => {\r\n\t\t\t\t\tdelete roomItem.history\r\n\t\t\t\t\troomItem.comments.forEach(commentItem => {\r\n\t\t\t\t\t\tdelete commentItem.history\r\n\t\t\t\t\t\tif (commentItem.image && commentItem.image.length > 0){\r\n\t\t\t\t\t\t\tlet newImages = []\r\n\t\t\t\t\t\t\tcommentItem.image.forEach(image => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"room image\", image)\r\n\t\t\t\t\t\t\t\tif (image.url && typeof image.url === 'object'){\r\n\t\t\t\t\t\t\t\t\tlocalForage.setItem(`file ${offlineFileCount+1}`, image.url)\r\n\t\t\t\t\t\t\t\t\timage.url = offlineFileCount+1\r\n\t\t\t\t\t\t\t\t\tfilesToDelete.push(offlineFileCount+1)\r\n\t\t\t\t\t\t\t\t\tofflineFileCount++\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnewImages.push(image)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tcommentItem.image = newImages\r\n\t\t\t\t\t\t\t// localForage.setItem(`file ${offlineFileCount+1}`, commentItem.image)\r\n\t\t\t\t\t\t\t// commentItem.image = offlineFileCount+1\r\n\t\t\t\t\t\t\t// offlineFileCount++\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} else if (key === 'comments'){\r\n\t\t\t\tvalidatedData[key].forEach(commentItem => {\r\n\t\t\t\t\tdelete commentItem.history\r\n\t\t\t\t\tif (commentItem.image && commentItem.image.length > 0 && typeof commentItem.image[0] === 'object'){\r\n\t\t\t\t\t\tlet newImages = []\r\n\t\t\t\t\t\tcommentItem.image.forEach(image => {\r\n\t\t\t\t\t\t\tconsole.log(\"comment image\", image)\r\n\t\t\t\t\t\t\tif (image.url && typeof image.url === 'object'){\r\n\t\t\t\t\t\t\t\tconsole.log(\"saving image\", image)\r\n\t\t\t\t\t\t\t\tlocalForage.setItem(`file ${offlineFileCount+1}`, image.url)\r\n\t\t\t\t\t\t\t\timage.url = offlineFileCount+1\r\n\t\t\t\t\t\t\t\tfilesToDelete.push(offlineFileCount+1)\r\n\t\t\t\t\t\t\t\tofflineFileCount++\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewImages.push(image)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tcommentItem.image = newImages\r\n\t\t\t\t\t\t// localForage.setItem(`file ${offlineFileCount+1}`, commentItem.image)\r\n\t\t\t\t\t\t// commentItem.image = offlineFileCount+1\r\n\t\t\t\t\t\t// offlineFileCount++\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} else if (key === 'signature_image') {\r\n\t\t\t\tif (validatedData[key] && typeof validatedData[key] === 'object'){\r\n\t\t\t\t\tlocalForage.setItem(`file ${offlineFileCount+1}`, validatedData[key])\r\n\t\t\t\t\tvalidatedData[key] = offlineFileCount+1\r\n\t\t\t\t\tofflineFileCount++\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tconsole.log(\"new offline validatedData\", validatedData)\r\n\r\n\tlocalForage.setItem('offlineFileCount', offlineFileCount)\r\n\treturn {item: validatedData, offlineFileCount: offlineFileCount, filesToDelete: filesToDelete}\r\n}\r\n\r\n// function stringifyAddress(item, offlineFileCount){\r\n// \tlocalForage.setItem(`file ${offlineFileCount+1}`, item.raw.image)\r\n// \titem.raw.image = offlineFileCount+1\r\n// \tofflineFileCount+=1\r\n// \tlocalForage.setItem('offlineFileCount', offlineFileCount)\r\n// \treturn {item: item, offlineFileCount: offlineFileCount}\r\n// }\r\n\r\nexport default function(state = initialState, action) {\r\n\tconsole.log(\"action.payload\", action.payload)\r\n\tlet offlineQueue = []\r\n\tlet offline = null\r\n\tswitch(action.type) {\r\n\t\tcase SAVE_CHECK:\r\n\t\t\tdelete action.payload.history\r\n\t\t\tif (action.filesToDelete && action.filesToDelete.length > 0){\r\n            \tfor (const imageItem of action.filesToDelete) {\r\n      \t\t\t\tif (typeof imageItem === 'number') localForage.removeItem(`file ${imageItem}`)\r\n            \t}\r\n\t\t\t}\r\n\t\t\toffline = stringifyCheck(action.payload, state.offlineFileCount)\r\n\t\t\tlocalForage.setItem(`save_check_${offline.item.id}`, JSON.stringify(offline.item))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tofflineFileCount: offline.offlineFileCount,\r\n\t\t\t\tsavedFilesToDelete: offline.filesToDelete,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase PUSH_CHECK_TO_OFFLINE_QUEUE:\r\n\t\t\tconsole.log(\"offline, storing in queue\")\r\n\t\t\tofflineQueue = Array.from(state.offlineQueue)\r\n\t\t\tconsole.log(\"offlineQueue\", offlineQueue)\r\n\t\t\taction.payload.id = offlineQueue.length > 0 ? offlineQueue[offlineQueue.length-1].id+1 : 1\r\n\t\t\tdelete action.payload.validatedData.history\r\n\t\t\toffline = stringifyCheck(action.payload.validatedData, state.offlineFileCount)\r\n\t\t\tconsole.log(\"offline\", offline)\r\n\t\t\taction.payload.item = offline.item\r\n\t\t\t// offline.item.type = 'editCheck'\r\n\t\t\tofflineQueue.push(action.payload)\r\n\t\t\tconsole.log(\"offlineQueue\", offlineQueue)\r\n\t\t\tsetOfflineQueue(offlineQueue)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tofflineQueue,\r\n\t\t\t\tofflineFileCount: offline.offlineFileCount\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase PUSH_ADDRESS_TO_OFFLINE_QUEUE:\r\n\t\t\tofflineQueue = Array.from(state.offlineQueue)\r\n\t\t\taction.payload.id = offlineQueue.length > 0 ? offlineQueue[offlineQueue.length-1].id+1 : 1\r\n\t\t\t// offline = stringifyAddress(action.payload, state.offlineFileCount)\r\n\t\t\tofflineQueue.push(action.payload)\r\n\t\t\tsetOfflineQueue(offlineQueue)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tofflineQueue,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase PUSH_OFFLINE_QUEUE:\r\n\t\t\tconsole.log(\"offline, storing in queue\")\r\n\t\t\tofflineQueue = Array.from(state.offlineQueue)\r\n\t\t\taction.payload.id = offlineQueue.length > 0 ? offlineQueue[offlineQueue.length-1].id+1 : 1\r\n\t\t\tofflineQueue.push(action.payload)\r\n\t\t\tconsole.log(\"offlineQueue\", offlineQueue)\r\n\t\t\tsetOfflineQueue(offlineQueue)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tofflineQueue,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase REMOVE_OFFLINE_QUEUE_ITEM:\r\n\t\t\tofflineQueue = Array.from(state.offlineQueue).filter(item => item.id !== action.payload.id)\r\n\t\t\tconsole.log(\"offlineQueue\", offlineQueue)\r\n\t\t\tlocalForage.setItem('offlineQueue', JSON.stringify(offlineQueue))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tofflineQueue,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase SET_QUEUE_ITEM_PENDING:\r\n\t\t\tofflineQueue = Array.from(state.offlineQueue)\r\n\t\t\tofflineQueue.forEach(item => {\r\n\t\t\t\tif (item.id === action.payload.id) item.status = 'pending'\r\n\t\t\t})\r\n\t\t\tconsole.log(\"offlineQueue\", offlineQueue)\r\n\t\t\tlocalForage.setItem('offlineQueue', JSON.stringify(offlineQueue))\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tofflineQueue,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase UNSET_QUEUE_ITEM_PENDING:\r\n\t\t\tofflineQueue = Array.from(state.offlineQueue)\r\n\t\t\tofflineQueue.forEach(item => {\r\n\t\t\t\tif (item.id === action.payload.id) item.status = null\r\n\t\t\t})\r\n\t\t\tconsole.log(\"offlineQueue\", offlineQueue)\r\n\t\t\tsetOfflineQueue(offlineQueue)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tofflineQueue,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase HANDLE_ONLINE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tonlineCount: state.onlineCount+1,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase REFRESH_OFFLINE_QUEUE:\r\n\t\t\tif (action.offlineQueue){\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tofflineQueue: action.offlineQueue,\r\n\t\t\t\t}\r\n\t\t\t} else if (action.offlineFileCount){\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tofflineFileCount: action.offlineFileCount,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t\t// case FETCH_SITEOPTIONS:\r\n\r\n\t}\r\n}","import { FETCH_CHECKS, CREATE_CHECK, REMOVE_MESSAGE, EDIT_CHECK, DELETE_CHECK, MASS_DELETE_CHECK, ADD_QUEUE_MESSAGE, ADD_CHECK_SERVER_ERROR_MESSAGE } from '../actions/types'\r\nimport localForage from \"localforage\";\r\n\r\nconst initialState = {\r\n    checkMessages: [],\r\n\tchecks: {},\r\n}\r\n\r\nfunction getMessageID(){\r\n\tlet id = parseInt(window.localStorage.getItem('message-id') || \"0\")\r\n\twindow.localStorage.setItem('message-id', id+1)\r\n\treturn id\r\n}\r\n\r\nfunction deleteAutoSave(checkID){\r\n\r\n\tlocalForage.getItem(`save_check_${checkID}`).then((result) => {\r\n\t\tif (result){\r\n\t      let getFilesToDelete = async (result) => {\r\n\t        async function forageComments(comments){\r\n\t          let filesToDelete = []\r\n\t          for (const commentItem of comments) {\r\n\t            if (commentItem.image && commentItem.image.length > 0){\r\n\t              for (const imageItem of commentItem.image) {\r\n\t                if (imageItem.url && typeof imageItem.url === 'number'){\r\n\t                  filesToDelete.push(imageItem.url)\r\n\t                }\r\n\t              }\r\n\t            }\r\n\t          }\r\n\t          return filesToDelete\r\n\t        }\r\n\r\n\t        let filesToDelete = []\r\n\t        let saveItem = JSON.parse(result)\r\n\t        let epFiles = await forageComments(saveItem.comments)\r\n\t        filesToDelete = filesToDelete.concat(epFiles)\r\n\t        for (const roomItem of saveItem.rooms) {\r\n\t          let roomFiles = await forageComments(roomItem.comments)\r\n\t          filesToDelete = filesToDelete.concat(roomFiles)\r\n\t        }\r\n\t        console.log(\"deleteAutoSave filesToDelete\", filesToDelete)\r\n\t        for (const imageItem of filesToDelete) {\r\n\t        \tlocalForage.removeItem(`file ${imageItem}`)\r\n\t        }\r\n\t        localForage.removeItem(`save_check_${checkID}`)\r\n\t      }\r\n\t      getFilesToDelete(result)\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n\tconsole.log(\"action\", action)\r\n\tlet checks = null\r\n\tlet checkMessages = null\r\n\tswitch(action.type) {\r\n\t\tcase FETCH_CHECKS:\r\n\t\t\t// let newAddresses = state.checks\r\n\t\t\t// newAddresses[action.page] = action.payload\r\n\t\t\tif (action.clearResults === true){\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tchecks: {\r\n\t\t\t\t        [action.params.page]: action.payload\r\n\t\t\t\t      },\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tchecks: Object.assign({}, state['checks'], {\r\n\t\t\t\t        [action.params.page]: action.payload\r\n\t\t\t\t      }),\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase CREATE_CHECK:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcheckMessages: state['checkMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase EDIT_CHECK:\r\n\t\t\t// Update existing check\r\n\t\t\tchecks = Object.assign({}, state['checks'])\r\n\t\t\tObject.keys(checks).forEach((page) => {\r\n\t\t\t\tchecks[page].results.forEach((item, i) => {\r\n\t\t\t\t\tif (item.id === action.payload.item.id)\tchecks[page].results[i] = action.payload.item\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t// Delete autosave\r\n\t\t\tdeleteAutoSave(action.payload.item.id)\r\n\t\t\t// Update messages\r\n\t\t\tcheckMessages = state['checkMessages']\r\n\t\t\tcheckMessages.forEach((message) => {\r\n\t\t\t\tif (message.item && message.item.id && message.item.id === action.payload.item.id){\r\n\t\t\t\t\tmessage.item = action.payload.item\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tchecks: checks,\r\n\t\t\t\tcheckMessages: checkMessages.concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase DELETE_CHECK:\r\n\t\t\tchecks = Object.assign({}, state['checks'])\r\n\t\t\tcheckMessages = state['checkMessages'].filter(message =>!message.item || message.item.id !== action.payload.item.id)\r\n\t\t\tObject.keys(checks).forEach((page) => {\r\n\t\t\t\tchecks[page].results.forEach((item, i) => {\r\n\t\t\t\t\tif (item.id === action.payload.item.id)\tchecks[page].results.splice(i, 1)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tchecks: checks,\r\n\t\t\t\tcheckMessages: checkMessages.concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase MASS_DELETE_CHECK:\r\n\t\t\tchecks = Object.assign({}, state['checks'])\r\n\t\t\tcheckMessages = state['checkMessages']\r\n\t\t\taction.payload.id_array.forEach(removeID => {\r\n\t\t\t\tcheckMessages = checkMessages.filter(message =>!message.item || message.item.id !== removeID)\r\n\t\t\t\tObject.keys(checks).forEach((page) => {\r\n\t\t\t\t\tchecks[page].results.forEach((item, i) => {\r\n\t\t\t\t\t\tif (removeID === item.id) checks[page].results.splice(i, 1)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tchecks: checks,\r\n\t\t\t\tcheckMessages: checkMessages.concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase REMOVE_MESSAGE:\r\n\t\t\tcheckMessages = state['checkMessages'].filter(message => message.id !== action.payload)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcheckMessages,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase ADD_QUEUE_MESSAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcheckMessages: state['checkMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase ADD_CHECK_SERVER_ERROR_MESSAGE:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcheckMessages: state['checkMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t\t// case FETCH_SITEOPTIONS:\r\n\r\n\t}\r\n}","import { GET_USER_LIST, CREATE_USER, EDIT_USER, MASS_DELETE_USER, REMOVE_MESSAGE, ADD_QUEUE_MESSAGE, ADD_USER_SERVER_ERROR_MESSAGE, ADD_USER_MESSAGE, DELETE_USER, SET_SHOW_CREATE_USER_MODAL, SET_CREATE_USER_ERRORS } from '../actions/types'\r\n\r\nconst initialState = {\r\n    userMessages: [],\r\n\tuserList: [],\r\n\tcreateUserErrors: {},\r\n\tshowCreateUserModal: false,\r\n}\r\n\r\nfunction getMessageID(){\r\n\tlet id = parseInt(window.localStorage.getItem('message-id') || \"0\")\r\n\twindow.localStorage.setItem('message-id', id+1)\r\n\treturn id\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n\tconsole.log(\"action.payload\", action.payload)\r\n\tlet userList = []\r\n\tlet userMessages = []\r\n\tswitch(action.type) {\r\n\t\tcase SET_SHOW_CREATE_USER_MODAL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshowCreateUserModal: action.payload,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase SET_CREATE_USER_ERRORS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcreateUserErrors: action.payload,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase GET_USER_LIST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserList: action.payload,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase CREATE_USER:\r\n\t\t\t// userList = Object.assign({}, state['userList'])\r\n\t\t\t// Object.keys(userList).forEach((page) => {\r\n\t\t\t// \tuserList[page].results.unshift(action.payload.item)\r\n\t\t\t// })\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t// userList: userList,\r\n\t\t\t\tuserMessages: state['userMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase EDIT_USER:\r\n\t\t\t// Update existing userList\r\n\t\t\tuserList = state['userList']\r\n\t\t\tuserList.forEach((item, i) => {\r\n\t\t\t\tif (item.id === action.payload.item.id)\tuserList[i] = action.payload.item\r\n\t\t\t})\r\n\t\t\t// Update messages\r\n\t\t\tuserMessages = state['userMessages']\r\n\t\t\tuserMessages.forEach((message) => {\r\n\t\t\t\tif (message.item && message.item.id && message.item.id === action.payload.item.id){\r\n\t\t\t\t\tmessage.item = action.payload.item\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserList: userList,\r\n\t\t\t\tuserMessages: userMessages.concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase MASS_DELETE_USER:\r\n\t\t\tuserList = state['userList']\r\n\t\t\tuserMessages = state['userMessages']\r\n\t\t\taction.payload.id_array.forEach(removeID => {\r\n\t\t\t\tuserMessages = userMessages.filter(message =>!message.item || message.item.id !== removeID)\r\n\t\t\t\tuserList.forEach((item, i) => {\r\n\t\t\t\t\tif (removeID === item.id) userList.splice(i, 1)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserList: userList,\r\n\t\t\t\tuserMessages: state['userMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase ADD_USER_MESSAGE:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserMessages: state['userMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase REMOVE_MESSAGE:\r\n\t\t\tuserMessages = state['userMessages'].filter(message => message.id !== action.payload)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserMessages,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase ADD_QUEUE_MESSAGE:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserMessages: state['userMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase ADD_USER_SERVER_ERROR_MESSAGE:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserMessages: state['userMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase DELETE_USER:\r\n\t\t\tuserList = state['userList']\r\n\t\t\tuserMessages = state['userMessages'].filter(message =>!message.item || message.item.id !== action.payload.item.id)\r\n\t\t\tuserList.forEach((item, i) => {\r\n\t\t\t\tif (item.id === action.payload.item.id)\tuserList.splice(i, 1)\r\n\t\t\t})\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserList: userList,\r\n\t\t\t\tuserMessages: userMessages.concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { FETCH_REPORTS, ADD_REPORT_SERVER_ERROR_MESSAGE } from '../actions/types'\r\n\r\nconst initialState = {\r\n    reportMessages: [],\r\n\treports: {},\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n\tconsole.log(\"action\", action)\r\n\tswitch(action.type) {\r\n\t\tcase FETCH_REPORTS:\r\n\t\t\tif (action.clearResults === true){\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\treports: {\r\n\t\t\t\t        [action.params.page]: action.payload\r\n\t\t\t\t      },\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\treports: Object.assign({}, state['reports'], {\r\n\t\t\t\t        [action.params.page]: action.payload\r\n\t\t\t\t      }),\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\t// case CREATE_ADDRESS:\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\taddressMessages: state['addressMessages'].concat([action.payload]),\r\n\t\t// \t}\r\n\t\t// \t/* falls through */\r\n\t\t// case EDIT_ADDRESS:\r\n\t\t// \taddresses = Object.assign({}, state['addresses'])\r\n\t\t// \tObject.keys(addresses).forEach((page) => {\r\n\t\t// \t\taddresses[page].results.forEach((item, i) => {\r\n\t\t// \t\t\tif (item.id === action.payload.item.id)\taddresses[page].results[i] = action.payload.item\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\taddresses: addresses,\r\n\t\t// \t\taddressMessages: state['addressMessages'].concat([action.payload]),\r\n\t\t// \t}\r\n\t\t// \t/* falls through */\r\n\t\t// case DELETE_ADDRESS:\r\n\t\t// \taddresses = Object.assign({}, state['addresses'])\r\n\t\t// \tObject.keys(addresses).forEach((page) => {\r\n\t\t// \t\taddresses[page].results.forEach((item, i) => {\r\n\t\t// \t\t\tif (item.id === action.payload.item.id)\taddresses[page].results.splice(i, 1)\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\taddresses: addresses,\r\n\t\t// \t\taddressMessages: state['addressMessages'].concat([action.payload]),\r\n\t\t// \t}\r\n\t\t// \t/* falls through */\r\n\t\t// case MASS_DELETE_ADDRESS:\r\n\t\t// \taddresses = Object.assign({}, state['addresses'])\r\n\t\t// \taction.payload.id_array.forEach(removeID => {\r\n\t\t// \t\tObject.keys(addresses).forEach((page) => {\r\n\t\t// \t\t\taddresses[page].results.forEach((item, i) => {\r\n\t\t// \t\t\t\tif (removeID === item.id) addresses[page].results.splice(i, 1)\r\n\t\t// \t\t\t})\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\taddresses: addresses,\r\n\t\t// \t\taddressMessages: state['addressMessages'].concat([action.payload]),\r\n\t\t// \t}\r\n\t\t// \t/* falls through */\r\n\t\t// case REMOVE_MESSAGE:\r\n\t\t// \tconst addressMessages = state['addressMessages'].filter(message => message.type !== action.payload.type && message.item.id !== action.payload.item.id)\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\taddressMessages,\r\n\t\t// \t}\r\n\t\t// \t/* falls through */\r\n\t\t// case ADD_QUEUE_MESSAGE:\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\taddressMessages: state['addressMessages'].concat([action.payload]),\r\n\t\t// \t}\r\n\t\t// \t/* falls through */\r\n\t\tcase ADD_REPORT_SERVER_ERROR_MESSAGE:\r\n\t\t\tlet id = window.localStorage.getItem('server-error-id') || 0\r\n\t\t\taction.payload.item = {id: id}\r\n\t\t\twindow.localStorage.setItem('server-error-id', id+1)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddressMessages: state['addressMessages'].concat([action.payload]),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { FETCH_SETTINGS, SUBMIT_SETTINGS, SET_SETTINGS_LOADING, ADD_SETTINGS_SERVER_ERROR_MESSAGE, REMOVE_MESSAGE, ADD_QUEUE_MESSAGE } from '../actions/types'\r\n\r\nconst initialState = {\r\n    settingsMessages: [],\r\n    hiddenElement: null,\r\n\tsettings: {\r\n      midterm_declaration: \"\",\r\n      disclaimer: \"\",\r\n      room_names: [],\r\n      default_rooms: [],\r\n\t},\r\n\tisLoading: false,\r\n}\r\n\r\nfunction getMessageID(){\r\n\tlet id = parseInt(window.localStorage.getItem('message-id') || \"0\")\r\n\twindow.localStorage.setItem('message-id', id+1)\r\n\treturn id\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n\tconsole.log(\"action\", action)\r\n\tlet settingsMessages = null\r\n\tswitch(action.type) {\r\n\t\tcase FETCH_SETTINGS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tsettings: Object.assign({}, state['settings'], {\r\n\t\t\t        midterm_declaration: action.midterm_declaration,\r\n\t\t\t        disclaimer: action.disclaimer,\r\n\t\t\t        room_names: action.room_names,\r\n\t\t\t        default_rooms: action.default_rooms,\r\n\t\t\t      }),\r\n\t\t\t\thiddenElement: action.hiddenElement,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase SUBMIT_SETTINGS:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tsettingsMessages: state['settingsMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t\tsettings: Object.assign({}, state['settings'], {\r\n\t\t\t        midterm_declaration: action.midterm_declaration,\r\n\t\t\t        disclaimer: action.disclaimer,\r\n\t\t\t        room_names: action.room_names,\r\n\t\t\t        default_rooms: action.default_rooms,\r\n\t\t\t      }),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase SET_SETTINGS_LOADING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisLoading: action.payload,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase ADD_SETTINGS_SERVER_ERROR_MESSAGE:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsettingsMessages: state['settingsMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase REMOVE_MESSAGE:\r\n\t\t\tsettingsMessages = state['settingsMessages'].filter(message => message.id !== action.payload)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsettingsMessages,\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tcase ADD_QUEUE_MESSAGE:\r\n\t\t\taction.payload.id = getMessageID()\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsettingsMessages: state['settingsMessages'].concat([action.payload]).slice(-3),\r\n\t\t\t}\r\n\t\t\t/* falls through */\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { combineReducers } from 'redux'\r\nimport siteReducer from './siteReducer'\r\nimport authReducer from './authReducer'\r\nimport addressReducer from './addressReducer'\r\nimport offlineReducer from './offlineReducer'\r\nimport checkReducer from './checkReducer'\r\nimport userReducer from './userReducer'\r\nimport reportReducer from './reportReducer'\r\nimport settingsReducer from './settingsReducer'\r\n\r\nexport default combineReducers({\r\n\tsite: siteReducer,\r\n\r\n\tauth: authReducer,\r\n\taddress: addressReducer,\r\n\toffline: offlineReducer,\r\n\tcheck: checkReducer,\r\n\tuser: userReducer,\r\n\treport: reportReducer,\r\n\tsettings: settingsReducer,\r\n})","export const SET_PAGE_OPACITY = 'SET_PAGE_OPACITY'\r\nexport const SET_PAGE_CONTENT_SELECTOR = 'SET_PAGE_CONTENT_SELECTOR'\r\n\r\nexport const FETCH_ADDRESSES = 'FETCH_ADDRESSES'\r\nexport const CREATE_ADDRESS = 'CREATE_ADDRESS'\r\nexport const REMOVE_MESSAGE = 'REMOVE_MESSAGE'\r\nexport const EDIT_ADDRESS = 'EDIT_ADDRESS'\r\nexport const DELETE_ADDRESS = 'DELETE_ADDRESS'\r\nexport const MASS_DELETE_ADDRESS = 'MASS_DELETE_ADDRESS'\r\nexport const ADD_QUEUE_MESSAGE = 'ADD_QUEUE_MESSAGE'\r\n\r\nexport const LOGIN = 'LOGIN'\r\nexport const LOGIN_ERROR = 'LOGIN_ERROR'\r\nexport const LOGOUT = 'LOGOUT'\r\nexport const SET_AUTHKEY = 'SET_AUTHKEY'\r\nexport const SET_CURRENT_ID = 'SET_CURRENT_ID'\r\n\r\nexport const PUSH_ADDRESS_TO_OFFLINE_QUEUE = 'PUSH_ADDRESS_TO_OFFLINE_QUEUE'\r\nexport const PUSH_OFFLINE_QUEUE = 'PUSH_OFFLINE_QUEUE'\r\nexport const REMOVE_OFFLINE_QUEUE_ITEM = 'REMOVE_OFFLINE_QUEUE_ITEM'\r\nexport const SET_QUEUE_ITEM_PENDING = 'SET_QUEUE_ITEM_PENDING'\r\nexport const UNSET_QUEUE_ITEM_PENDING = 'UNSET_QUEUE_ITEM_PENDING'\r\nexport const HANDLE_ONLINE = 'HANDLE_ONLINE'\r\nexport const REFRESH_OFFLINE_QUEUE = 'REFRESH_OFFLINE_QUEUE'\r\nexport const ADD_ADDRESS_SERVER_ERROR_MESSAGE = 'ADD_ADDRESS_SERVER_ERROR_MESSAGE'\r\n\r\nexport const SAVE_CHECK = 'SAVE_CHECK'\r\nexport const PUSH_CHECK_TO_OFFLINE_QUEUE = 'PUSH_CHECK_TO_OFFLINE_QUEUE'\r\nexport const FETCH_CHECKS = 'FETCH_CHECKS'\r\nexport const CREATE_CHECK = 'CREATE_CHECK'\r\nexport const EDIT_CHECK = 'EDIT_CHECK'\r\nexport const DELETE_CHECK = 'DELETE_CHECK'\r\nexport const MASS_DELETE_CHECK = 'MASS_DELETE_CHECK'\r\nexport const ADD_CHECK_SERVER_ERROR_MESSAGE = 'ADD_CHECK_SERVER_ERROR_MESSAGE'\r\n\r\nexport const GET_USER_LIST = 'GET_USER_LIST'\r\nexport const CREATE_USER = 'CREATE_USER'\r\nexport const EDIT_USER = 'EDIT_USER'\r\nexport const PUSH_USER_TO_OFFLINE_QUEUE = 'PUSH_USER_TO_OFFLINE_QUEUE'\r\nexport const ADD_USER_SERVER_ERROR_MESSAGE = 'ADD_USER_SERVER_ERROR_MESSAGE'\r\nexport const MASS_DELETE_USER = 'MASS_DELETE_USER'\r\nexport const ADD_USER_MESSAGE = 'ADD_USER_MESSAGE'\r\nexport const DELETE_USER = 'DELETE_USER'\r\nexport const SET_SHOW_CREATE_USER_MODAL = 'SET_SHOW_CREATE_USER_MODAL'\r\nexport const SET_CREATE_USER_ERRORS = 'SET_CREATE_USER_ERRORS'\r\n\r\nexport const FETCH_REPORTS = 'FETCH_REPORTS'\r\nexport const ADD_REPORT_SERVER_ERROR_MESSAGE = 'ADD_REPORT_SERVER_ERROR_MESSAGE'\r\n\r\nexport const FETCH_SETTINGS = 'FETCH_SETTINGS'\r\nexport const SUBMIT_SETTINGS = 'SUBMIT_SETTINGS'\r\nexport const ADD_ROOM = 'ADD_ROOM'\r\nexport const REMOVE_ROOM = 'REMOVE_ROOM'\r\nexport const SET_SETTINGS_LOADING = 'SET_SETTINGS_LOADING'\r\nexport const ADD_SETTINGS_SERVER_ERROR_MESSAGE = 'ADD_SETTINGS_SERVER_ERROR_MESSAGE'","import { createStore, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport rootReducer from './reducers'\r\n\r\nconst initalState = {\r\n\r\n}\r\n\r\nconst middleware = [thunk]\r\n\r\nconst store = createStore(rootReducer, initalState, applyMiddleware(...middleware))\r\n\r\nexport default store","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\n/**\r\n * Wraps the React Router Link component and creates a delay after the link is clicked.\r\n */\r\nexport default class DelayLink extends React.Component {\r\n  static propTypes = {\r\n    /**\r\n     * Milliseconds to wait before registering the click.\r\n     */\r\n    delay:        PropTypes.number,\r\n    /**\r\n     * Called after the link is clicked and before the delay timer starts.\r\n     */\r\n    onDelayStart: PropTypes.func,\r\n    /**\r\n     * Called after the delay timer ends.\r\n     */\r\n    onDelayEnd:   PropTypes.func\r\n  };\r\n\r\n  static defaultProps = {\r\n    delay:        0,\r\n    onDelayStart: () => {},\r\n    onDelayEnd:   () => {}\r\n  };\r\n\r\n  static contextTypes = Link.contextTypes;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.timeout = null;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Called when the link is clicked\r\n   *\r\n   * @param {Event} e\r\n   */\r\n  handleClick = (e) => {\r\n    const { replace, to, delay, onDelayStart, onDelayEnd } = this.props;\r\n    const { history } = this.props;\r\n\r\n    onDelayStart(e, to);\r\n    if (e.defaultPrevented) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n\r\n    this.timeout = setTimeout(() => {\r\n      if (replace) {\r\n        history.replace(to);\r\n      } else {\r\n        history.push(to);\r\n      }\r\n      onDelayEnd(e, to);\r\n    }, delay);\r\n  };\r\n\r\n  render() {\r\n    const props = Object.assign({}, this.props);\r\n    delete props.delay;\r\n    delete props.onDelayStart;\r\n    delete props.onDelayEnd;\r\n\r\n    return (\r\n      <a {...props} onClick={this.handleClick} />\r\n    );\r\n  }\r\n}\r\n","import { SET_PAGE_OPACITY, SET_PAGE_CONTENT_SELECTOR } from './types'\r\n// import { api_url } from '../../api_url'\r\nimport anime from 'animejs';\r\n\r\nexport const toggleAlignCenter = (isCenter) => dispatch => {\r\n  console.log(\"toggleAlignCenter\", isCenter)\r\n  const centerRow = document.querySelector('.center-row')\r\n  let offsetTop = centerRow.offsetTop + centerRow.offsetHeight\r\n  // anime({\r\n  //     targets: '.center-row',\r\n  //     marginTop: offsetTop*-1,\r\n  //     // delay: 250,\r\n  //     duration: 1000,\r\n  //     easing: 'easeInOutQuad',\r\n  //   });\r\n}\r\n\r\nexport const setPageOpacity = (value, offsetX) => dispatch => {\r\n\tconsole.log(\"setPageOpacity\", value, offsetX)\r\n\t  dispatch({\r\n\t    type: SET_PAGE_OPACITY,\r\n\t    page_opacity: value,\r\n\t    page_left: offsetX,\r\n\t  })\r\n      // setTimeout(()=>{\r\n\t\t// document.querySelector('.page').style.setProperty('opacity', value)\r\n\t\t// document.querySelector('.page').style.setProperty('left', offsetX)\r\n      // }, 100)\r\n\t// document.querySelector('.page').style.setProperty('transform', `translateX(${offsetX.toString()}px);`)\r\n      // anime({\r\n      //   targets: [document.querySelector('.page')],\r\n      //   keyframes: [\r\n      //     {opacity: value, duration: 1000},\r\n      //   ],\r\n      //   delay: 250,\r\n      //   easing: 'easeInOutQuad',\r\n      // });\r\n}\r\n\r\nexport const setPageContentSelector = (value) => dispatch => {\r\n      console.log(\"setPageContentSelector\", value)\r\n        dispatch({\r\n          type: SET_PAGE_CONTENT_SELECTOR,\r\n          payload: value,\r\n        })\r\n}","import React, { Component } from 'react';\r\n// import { Container, Table, Row, Col, Navbar, Breadcrumb, Dropdown, DropdownButton, Form, Alert, Spinner } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\nimport DelayLink from './DelayLink.js'\r\nimport { createBrowserHistory } from 'history';\r\nimport { connect } from 'react-redux'\r\nimport { setPageOpacity } from '../redux/actions/siteActions'\r\n\r\nclass ProjectTile extends Component {\r\n\r\n  render(){\r\n    return (\r\n      <DelayLink \r\n      \tdelay={250} \r\n      \tto={this.props.projectURL} \r\n      \thistory={this.props.history} \r\n      \tclassName=\"defaultOpaque col-sm-3 project-tile\"\r\n      >\r\n        <img src={this.props.imgURL} className=\"w-100\" alt={this.props.imgAlt} />\r\n        <h3 className=\"mt-2 mb-0\">{this.props.title}</h3>\r\n      </DelayLink>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  history: state.site.history,\r\n});\r\n\r\nexport default connect(mapStateToProps, { setPageOpacity })(ProjectTile);\r\n","import React, { Component } from 'react';\r\nimport ProjectTile from './ProjectTile.js'\r\n// import { Container, Table, Row, Col, Navbar, Breadcrumb, Dropdown, DropdownButton, Form, Alert, Spinner } from 'react-bootstrap'\r\nimport { connect } from 'react-redux'\r\n\r\nclass Page extends Component {\r\n\r\n  render(){\r\n    return (\r\n    <div \r\n    \tclassName={this.props.className+\" page\"} \r\n    \tstyle={{\r\n    \t\topacity: this.props.page_opacity,\r\n    \t\ttransform: `translateX(${this.props.page_left}px)`,\r\n    \t}}\r\n    >{this.props.inner}</div>);\r\n  }\r\n}\r\nconst mapStateToProps = state => ({\r\n  page_opacity: state.site.page_opacity,\r\n  page_left: state.site.page_left,\r\n});\r\n\r\nexport default connect(mapStateToProps, { })(Page);","import React, { Component } from 'react';\r\nimport { Container, Table, Row, Col, Navbar, Breadcrumb, Dropdown, DropdownButton, Form, Alert, Spinner } from 'react-bootstrap'\r\nimport anime from 'animejs';\r\nimport Page from './Page.js'\r\nimport ProjectTile from './ProjectTile.js'\r\nimport { Router } from \"react-router\";\r\nimport { Route, Switch, Link } from 'react-router-dom'\r\nimport { createBrowserHistory } from 'history';\r\nimport DelayLink from './DelayLink.js'\r\nimport { connect } from 'react-redux'\r\nimport { setPageOpacity } from '../redux/actions/siteActions'\r\n\r\nclass BackPageButton extends Component {\r\n\r\n  render(){\r\n    return (\r\n      <DelayLink \r\n        delay={250} \r\n        to={this.props.to} \r\n        history={this.props.history}\r\n        className=\"back-button-link\"\r\n      ><img src=\"/back-arrow.png\" className=\"back-arrow\" /></DelayLink>)\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  history: state.site.history,\r\n  routes: state.site.routes,\r\n});\r\n\r\nexport default connect(mapStateToProps, { setPageOpacity })(BackPageButton);","import React, { Component } from 'react';\r\n// import logo from './logo.svg';\r\nimport './App.css';\r\nimport { Container, Table, Row, Col, Navbar, Breadcrumb, Dropdown, DropdownButton, Form, Alert, Spinner } from 'react-bootstrap'\r\nimport anime from 'animejs';\r\nimport Page from './components/Page.js'\r\nimport ProjectTile from './components/ProjectTile.js'\r\nimport { Router } from \"react-router\";\r\nimport { Route, Switch, Link } from 'react-router-dom'\r\nimport { createBrowserHistory } from 'history';\r\nimport DelayLink from './components/DelayLink.js'\r\nimport BackPageButton from './components/BackPageButton.js'\r\nimport { connect } from 'react-redux'\r\nimport { setPageOpacity } from './redux/actions/siteActions'\r\n\r\nclass ProjectsSPGPage extends Component {\r\n\r\n  componentDidMount(){\r\n      setTimeout(()=>this.props.setPageOpacity(1, 0), 100)\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <Page\r\n        className=\"from-left\"\r\n        inner={\r\n          <>\r\n            <BackPageButton \r\n              to={this.props.routes.projects} \r\n            />\r\n            <Col sm={8}>\r\n              <img src=\"/sohamplaygroup-desktop.png\" className=\"w-100\" />\r\n            </Col>\r\n            <Col sm={3}>\r\n              <h3>Soham Playgroup</h3>\r\n              <a href=\"https://sohamplaygroup.co.uk/\" className=\"mb-2\">Visit website</a>\r\n              <div className=\"tech-logo\"><img src=\"/django-logo.png\" /></div>\r\n              <div className=\"tech-logo ml-2\"><img src=\"/wagtail-logo.png\" /></div>\r\n            </Col>\r\n          </>\r\n        }\r\n      />)\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  history: state.site.history,\r\n  routes: state.site.routes,\r\n});\r\n\r\nexport default connect(mapStateToProps, { setPageOpacity })(ProjectsSPGPage);","import React, { Component } from 'react';\r\n// import logo from './logo.svg';\r\nimport './App.css';\r\nimport { Container, Table, Row, Col, Navbar, Breadcrumb, Dropdown, DropdownButton, Form, Alert, Spinner } from 'react-bootstrap'\r\nimport anime from 'animejs';\r\nimport Page from './components/Page.js'\r\nimport ProjectTile from './components/ProjectTile.js'\r\nimport { Router } from \"react-router\";\r\nimport { Route, Switch, Link } from 'react-router-dom'\r\nimport { createBrowserHistory } from 'history';\r\nimport DelayLink from './components/DelayLink.js'\r\nimport { connect } from 'react-redux'\r\nimport { setPageOpacity, setPageContentSelector } from './redux/actions/siteActions'\r\n\r\nclass ProjectsPage extends Component {\r\n\r\n  componentDidMount(){\r\n      // setTimeout(()=>this.props.setPageOpacity(1, 0), 10)\r\n\r\n      const projects = [\r\n        '.page > .project-tile:nth-child(1)',\r\n        '.page > .project-tile:nth-child(2)',\r\n        '.page > .project-tile:nth-child(3)',\r\n        '.page > .project-tile:nth-child(4)',\r\n      ]\r\n\r\n      const projectPageSelector = [\r\n        projects[0],\r\n        projects[1],\r\n        projects[2],\r\n        projects[3],\r\n      ].join(', ')\r\n\r\n      this.props.setPageContentSelector(projectPageSelector)\r\n  }\r\n\r\n  render(){\r\n      // this.props.setPageOpacity(1)\r\n    return (\r\n      <Page\r\n        inner={\r\n          <>\r\n            <ProjectTile\r\n              title=\"Saint Andrews Bureau Routine Check App\"\r\n              projectURL={this.props.routes.projectsSAB}\r\n              imgURL=\"/sabapp.png\"\r\n              imgAlt=\"SAB App\"\r\n            />\r\n            <ProjectTile\r\n              title=\"Advanced Boosters Virtual Item Store\"\r\n              projectURL={this.props.routes.projectsAB}\r\n              imgURL=\"/abapp.png\"\r\n              imgAlt=\"Advanced Boosters\"\r\n            />\r\n            <ProjectTile\r\n              title=\"Sam and Max Website\"\r\n              projectURL={this.props.routes.projectsSamAndMax}\r\n              imgURL=\"/samandmax.png\"\r\n              imgAlt=\"Sam and Max\"\r\n            />\r\n            <ProjectTile\r\n              title=\"Soham Playgroup Website\"\r\n              projectURL={this.props.routes.projectsSPG}\r\n              imgURL=\"/sohamplaygroup.png\"\r\n              imgAlt=\"Soham Playgroup\"\r\n            />\r\n          </>\r\n        }\r\n      />)\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  history: state.site.history,\r\n  routes: state.site.routes,\r\n});\r\n\r\nexport default connect(mapStateToProps, { setPageOpacity, setPageContentSelector })(ProjectsPage);","import React, { Component } from 'react';\r\n// import logo from './logo.svg';\r\nimport '../App.css';\r\nimport { Container, Table, Row, Col, Navbar, Breadcrumb, Dropdown, DropdownButton, Form, Alert, Spinner } from 'react-bootstrap'\r\nimport anime from 'animejs';\r\nimport Page from '../components/Page.js'\r\nimport ProjectTile from '../components/ProjectTile.js'\r\nimport { Router } from \"react-router\";\r\nimport { Route, Switch, Link } from 'react-router-dom'\r\nimport { createBrowserHistory } from 'history';\r\nimport DelayLink from '../components/DelayLink.js'\r\nimport BackPageButton from '../components/BackPageButton.js'\r\nimport { connect } from 'react-redux'\r\nimport { setPageOpacity } from '../redux/actions/siteActions'\r\n\r\nclass SMProjectPage extends Component {\r\n\r\n  componentDidMount(){\r\n      setTimeout(()=>this.props.setPageOpacity(1, 0), 100)\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <Page\r\n        className=\"from-left\"\r\n        inner={\r\n          <>\r\n            <BackPageButton \r\n              to={this.props.routes.projects} \r\n            />\r\n            <Col sm={12}>\r\n              <img src=\"/samandmax_header.png\" className=\"w-100\" />\r\n            </Col>\r\n          </>\r\n        }\r\n      />)\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  history: state.site.history,\r\n  routes: state.site.routes,\r\n});\r\n\r\nexport default connect(mapStateToProps, { setPageOpacity })(SMProjectPage);","import React, { Component } from 'react';\r\n\r\nconst pswpElement = \r\n    <div className=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n        <div className=\"pswp__bg\"></div>\r\n        <div className=\"pswp__scroll-wrap\">\r\n            <div className=\"pswp__container\">\r\n                <div className=\"pswp__item\"></div>\r\n                <div className=\"pswp__item\"></div>\r\n                <div className=\"pswp__item\"></div>\r\n            </div>\r\n            <div className=\"pswp__ui pswp__ui--hidden\">\r\n\r\n                <div className=\"pswp__top-bar\">\r\n                    <div className=\"pswp__counter\"></div>\r\n\r\n                    <button className=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button>\r\n\r\n                    <button className=\"pswp__button pswp__button--share\" title=\"Share\"></button>\r\n\r\n                    <button className=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button>\r\n\r\n                    <button className=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button>\r\n                    <div className=\"pswp__preloader\">\r\n                        <div className=\"pswp__preloader__icn\">\r\n                          <div className=\"pswp__preloader__cut\">\r\n                            <div className=\"pswp__preloader__donut\"></div>\r\n                          </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\">\r\n                    <div className=\"pswp__share-tooltip\"></div> \r\n                </div>\r\n\r\n                <button className=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\">\r\n                </button>\r\n\r\n                <button className=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\">\r\n                </button>\r\n\r\n                <div className=\"pswp__caption\">\r\n                    <div className=\"pswp__caption__center\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\nexport default pswpElement","import React, { Component } from 'react';\r\n// import logo from './logo.svg';\r\nimport '../App.css';\r\nimport { Container, Table, Row, Col, Navbar, Breadcrumb, Dropdown, DropdownButton, Form, Alert, Spinner, Tooltip, OverlayTrigger  } from 'react-bootstrap'\r\nimport anime from 'animejs';\r\nimport Page from '../components/Page.js'\r\nimport ProjectTile from '../components/ProjectTile.js'\r\nimport { Router } from \"react-router\";\r\nimport { Route, Switch, Link } from 'react-router-dom'\r\nimport { createBrowserHistory } from 'history';\r\nimport DelayLink from '../components/DelayLink.js'\r\nimport BackPageButton from '../components/BackPageButton.js'\r\nimport { connect } from 'react-redux'\r\nimport { setPageOpacity, toggleAlignCenter } from '../redux/actions/siteActions'\r\nimport pswpElement from '../components/pswpElement.js'\r\n\r\nclass SABProjectPage extends Component {\r\n\r\n  componentDidMount(){\r\n      setTimeout(()=>this.props.setPageOpacity(1, 0), 100)\r\n      // this.props.toggleAlignCenter(false)\r\n  }\r\n\r\n  initialiseGallery = (e, i) => {\r\n    console.log(\"initialiseGallery index\", i)\r\n    // var pswpEle = e.target.parentElement.parentElement.parentElement.parentElement.firstElementChild//document.querySelectorAll('.pswp')[0];\r\n    var pswpEle = document.querySelector('.pswp')\r\n    console.log(\"pswpEle\", pswpEle)\r\n\r\n    // build items array\r\n    // var items = block.value.children.map(item => {\r\n    //   item.src = global_vars.api_url+item.src\r\n    //   if (!item.title && item.description) {\r\n    //     item.title = item.description\r\n    //     item.description = ''\r\n    //   }\r\n    //   // item.title = item.r\r\n    //   // item.description = item.description\r\n    //   return item\r\n    // })t\r\n    var items = [\r\n      {src: \"/screenshots/sab/sab (1).png\", title: \"Main menu\", description: \"\", w:2405, h:1454},\r\n      {src: \"/screenshots/sab/sab (2).png\", title: \"Address management\", description: \"\", w:2405, h:1454},\r\n      {src: \"/screenshots/sab/sab (3).png\", title: \"Address edit form\", description: \"\", w:2405, h:1454},\r\n      {src: \"/screenshots/sab/sab (4).png\", title: \"Routine check management\", description: \"\", w:2405, h:1454},\r\n      {src: \"/screenshots/sab/sab (5).png\", title: \"Routine check edit form\", description: \"\", w:2405, h:1454},\r\n      // {src: \"/screenshots/sab/sab (6).png\", title: \"t\", description: \"\", w:2405, h:1454},\r\n      {src: \"/screenshots/sab/sab (7).png\", title: \"Routine check signature\", description: \"\", w:2405, h:1454},\r\n      {src: \"/screenshots/sab/sab (8).png\", title: \"Inventory edit form\", description: \"\", w:2405, h:1454},\r\n      // {src: \"/screenshots/sab/sab (9).png\", title: \"t\", description: \"\", w:2405, h:1454},\r\n      {src: \"/screenshots/sab/sab (10).png\", title: \"User edit form\", description: \"\", w:2405, h:1454},\r\n      {src: \"/screenshots/sab/sab (11).png\", title: \"Inventory settings\", description: \"\", w:2405, h:1454},\r\n    ]\r\n\r\n    // define options (if needed)\r\n    var options = {\r\n      history: false,\r\n      maxSpreadZoom: 1,\r\n      focus: false,\r\n      escKey: false,\r\n      modal: false,\r\n      pinchToClose: false,\r\n      closeOnScroll: false,\r\n      closeOnVerticalDrag: false,\r\n      index: 0,\r\n      addCaptionHTMLFn: function(item, captionEl, isFake) {\r\n        const hasTitle = item.title && item.title !== ''\r\n        const hasDesc = item.description && item.description !== ''\r\n        if (hasTitle && hasDesc) {\r\n          captionEl.children[0].innerHTML = item.title +  '<br/><small>' + item.description + '</small>';\r\n          return true\r\n        } else if (hasTitle || hasDesc) {\r\n          captionEl.children[0].innerHTML = hasTitle ? item.title : item.description;\r\n          // captionEl.children[0].innerText = item.title ? item.title : item.description;\r\n          return true\r\n        } else {\r\n          captionEl.children[0].innerText = '';\r\n          return false;\r\n        }\r\n      },\r\n    };\r\n\r\n    // if (window.innerWidth < 1024){\r\n    // options['modal'] = false\r\n    // options['closeOnVerticalDrag'] = false\r\n    // options['closeOnScroll'] = false\r\n    // options['focus'] = false\r\n    // }\r\n\r\n    // Initializes and opens PhotoSwipe\r\n    /*eslint-disable no-undef*/\r\n    var gallery = new PhotoSwipe( pswpEle, PhotoSwipeUI_Default, items, options);\r\n    gallery.listen('updateScrollOffset', function(_offset) {\r\n        var r = pswpEle.getBoundingClientRect();\r\n        _offset.x += r.left;\r\n        _offset.y += r.top;\r\n    });\r\n    gallery.listen('preventDragEvent', function(e, isDown, preventObj) {\r\n        preventObj.prevent = false;\r\n    });\r\n    /*eslint-enable no-undef*/\r\n    gallery.init();\r\n  }\r\n\r\n  render(){\r\n    let thisComp = this\r\n    window.requestAnimationFrame(function() {\r\n      thisComp.initialiseGallery()\r\n    });\r\n    \r\n    return (\r\n      <Page\r\n        className=\"from-left ml-3 mt-5\"\r\n        inner={\r\n          <Row>\r\n            <Col sm={2}>\r\n              <OverlayTrigger\r\n                placement=\"bottom\"\r\n                delay={{ show: 50, hide: 50 }}\r\n                overlay={\r\n                  <Tooltip id=\"button-tooltip\">\r\n                    <b>Visit website</b>\r\n                  </Tooltip>\r\n                }\r\n              >\r\n                <a href=\"https://www.sab.co.uk/\">\r\n                  <img src=\"/sab-border-3.png\" className=\"w-100\" />\r\n                </a>\r\n              </OverlayTrigger>\r\n            </Col>\r\n            <Col sm={10}>\r\n              <h3 className=\"\">SAB Property Management App</h3>\r\n              <p className=\"font-italic\">Saint Andrews Bureau is a lettings, sales, estate management and investment company with offices located in London, Cambridgeshire and Hertfordshire.</p>\r\n            </Col>\r\n            <Col sm={12} className=\"mt-3\">\r\n              {pswpElement}\r\n            </Col>\r\n            <Col sm={6} className=\"mt-3\">\r\n              <p>Features:</p>\r\n              <ul>\r\n                <li>Offline capability</li>\r\n                <li>Mobile friendly</li>\r\n                <li>Cross-platform - iOS/Android/Desktop browser</li>\r\n                <li>Touch-screen signature input</li>\r\n                <li>Intuitive UI</li>\r\n                <li>PDF reports</li>\r\n                <li>Email notifications</li>\r\n              </ul>\r\n            </Col>\r\n            <Col sm={6} className=\"mt-3 text-right\">\r\n              <p>Made with:</p>\r\n              <ul className=\"logo-list\">\r\n                <OverlayTrigger\r\n                  placement=\"bottom\"\r\n                  delay={{ show: 50, hide: 50 }}\r\n                  overlay={\r\n                    <Tooltip id=\"button-tooltip\">\r\n                      <b>ReactJS</b>\r\n                    </Tooltip>\r\n                  }\r\n                >\r\n                <li>\r\n                  <a href=\"https://reactjs.org/\">\r\n                    <img src=\"/logos/reactjs-logo.png\" height=\"50\"/>\r\n                  </a>\r\n                </li>\r\n                </OverlayTrigger>\r\n                <OverlayTrigger\r\n                  placement=\"bottom\"\r\n                  delay={{ show: 50, hide: 50 }}\r\n                  overlay={\r\n                    <Tooltip id=\"button-tooltip\">\r\n                      <b>Django</b>\r\n                    </Tooltip>\r\n                  }\r\n                >\r\n                <li>\r\n                  <a href=\"https://www.djangoproject.com/\">\r\n                    <img src=\"/logos/django-logo.png\" height=\"50\"/>\r\n                  </a>\r\n                </li>\r\n                </OverlayTrigger>\r\n                <OverlayTrigger\r\n                  placement=\"bottom\"\r\n                  delay={{ show: 50, hide: 50 }}\r\n                  overlay={\r\n                    <Tooltip id=\"button-tooltip\">\r\n                      <b>Bootstrap</b>\r\n                    </Tooltip>\r\n                  }\r\n                >\r\n                <li>\r\n                  <a href=\"https://getbootstrap.com/\">\r\n                    <img src=\"/logos/bootstrap-logo.svg\" height=\"50\"/>\r\n                  </a>\r\n                </li>\r\n                </OverlayTrigger>\r\n                <OverlayTrigger\r\n                  placement=\"bottom\"\r\n                  delay={{ show: 50, hide: 50 }}\r\n                  overlay={\r\n                    <Tooltip id=\"button-tooltip\">\r\n                      <b>MySQL</b>\r\n                    </Tooltip>\r\n                  }\r\n                >\r\n                <li>\r\n                  <a href=\"https://www.mysql.com/\">\r\n                    <img src=\"/logos/mysql-logo.png\" height=\"50\"/>\r\n                  </a>\r\n                </li>\r\n                </OverlayTrigger>\r\n              </ul>\r\n            </Col>\r\n          </Row>\r\n        }\r\n      />)\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  history: state.site.history,\r\n  routes: state.site.routes,\r\n});\r\n\r\nexport default connect(mapStateToProps, { setPageOpacity, toggleAlignCenter })(SABProjectPage);","import React, { Component } from 'react';\n// import logo from './logo.svg';\nimport './App.css';\nimport { Container, Table, Row, Col, Navbar, Breadcrumb, Dropdown, DropdownButton, Form, Alert, Spinner } from 'react-bootstrap'\nimport anime from 'animejs';\nimport Page from './components/Page.js'\nimport ProjectTile from './components/ProjectTile.js'\nimport { Router } from \"react-router\";\nimport { Route, Switch, Link } from 'react-router-dom'\nimport { createBrowserHistory } from 'history';\nimport DelayLink from './components/DelayLink.js'\nimport { connect } from 'react-redux'\nimport { setPageOpacity } from './redux/actions/siteActions'\nimport ProjectsSPGPage from './ProjectsSPGPage.js'\nimport ProjectsPage from './ProjectsPage.js'\nimport SMProjectPage from './projects/SMProjectPage.js'\nimport SABProjectPage from './projects/SABProjectPage.js'\n\nclass projectsSABPage extends Component {\n  render(){\n    return (\n      <Page\n        inner={\n          <>\n            <h2>Hello world</h2>\n          </>\n        }\n      />)\n  }\n}\n\nclass projectsABPage extends Component {\n  render(){\n    return (\n      <Page\n        inner={\n          <>\n            <h2>Hello world</h2>\n          </>\n        }\n      />)\n  }\n}\n\n// class projectsSamAndMaxPage extends Component {\n//   render(){\n//     return (\n//       <Page\n//         inner={\n//           <>\n//             <h2>Hello world</h2>\n//           </>\n//         }\n//       />)\n//   }\n// }\n\nclass App extends Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      currentPage: null,\n    }\n    this.selectors = {\n      logo: '.App-logo',\n      title: '.rightSide > h1',\n      titleLetters: '.rightSide > h1 .letter',\n      subTitle: '.rightSide > h2',\n      subTitleLetters: '.rightSide > h2 .letter',\n      links: [\n        '.leftSide > .nav-links > a:nth-child(1)',\n        '.leftSide > .nav-links > a:nth-child(2)',\n        '.leftSide > .nav-links > a:nth-child(3)',\n        '.leftSide > .nav-links > a:nth-child(4)',\n      ],\n      // pageContent: '.rightSide > div',\n    }\n    this.paths = [\n      {name: this.props.routes.home, value: <ProjectsPage/>},\n      {name: this.props.routes.projects, value: <ProjectsPage/>},\n      {name: this.props.routes.projectsSAB, value: <SABProjectPage/>},\n      // {name: this.props.routes.projectsAB, value: <ProjectsPage/>},\n      {name: this.props.routes.projectsSamAndMax, value: <SMProjectPage/>},\n      {name: this.props.routes.projectsSPG, value: <ProjectsSPGPage/>},\n      // {name: this.props.routes.about, value: <ProjectsPage/>},\n    ]\n  }\n\n  AnimatePageContent = (pageContent, delay) => {\n    // anime({\n    //   targets: pageContent,\n    //   keyframes: [\n    //     {opacity: 1, duration: 500},\n    //   ],\n    //   delay: 1500,\n    //   easing: 'easeInOutQuad',\n    // });\n\n    anime({\n      targets: pageContent,\n      opacity: [\n        {value: 0, duration: delay},\n        {value: 1, easing: 'easeInOutQuad', duration: 500},\n      ],\n      scale: [\n        {value: 1, easing: 'easeInQuad', duration: delay},\n        {value: 1.025, easing: 'easeInQuad', duration: 200},\n        {value: 1, easing: 'easeOutQuad', duration: 200},\n      ],\n      delay: anime.stagger(100, {easing: 'easeInSine'}),\n    })\n    setTimeout(() => {\n      document.querySelectorAll(pageContent).forEach(e => e.style.transform = '')\n    }, delay+1000)\n  }\n\n  componentDidMount(){\n      this.setState({\n        currentPage: this.paths.find(path => path.name === window.location.hash)\n      })\n\n      const unlisten = this.props.history.listen((location, action) => {\n        // console.log(window.location.hash, this.paths, this.paths.find(path => path.name === window.location.hash))\n        this.setState({\n          currentPage: this.paths.find(path => path.name === window.location.hash)\n        }, () => {\n          const {pageContentSelector} = this.props\n          this.AnimatePageContent(pageContentSelector, 0)\n        })\n      });\n\n      const {\n        logo, title, titleLetters,\n        links, subTitle, subTitleLetters,\n      } = this.selectors\n\n      const { pageContentSelector } = this.props\n\n      // anime({\n      //   targets: logo,\n      //   width: '115%',\n      //   duration: 20000,\n      //   easing: 'easeInOutBack',\n      //   delay: 500,\n      //   loop: true,\n      //   direction: 'alternate',\n      // })\n\n      anime({\n        targets: titleLetters,\n        opacity: 1,\n        duration: 500,//anime.stagger(200),\n        easing: 'easeInSine',\n        scale: [\n          {value: 1.05, easing: 'easeInQuad', duration: 200},\n          {value: 1, easing: 'easeOutQuad', duration: 200},\n        ],\n        delay: anime.stagger(25, {start: 500}),\n      })\n\n      anime({\n        targets: subTitleLetters,\n        opacity: 1,\n        duration: 500,//anime.stagger(200),\n        easing: 'easeInSine',\n        scale: [\n          {value: 1.05, easing: 'easeInQuad', duration: 200},\n          {value: 1, easing: 'easeOutQuad', duration: 200},\n        ],\n        delay: anime.stagger(25, {start: 750}),\n      })\n\n      anime({\n        targets: '.top-padding',\n        paddingTop: '0vh',\n        duration: 1500,//anime.stagger(200),\n        easing: 'easeInOutQuad',\n        delay: 500,\n      })\n\n      anime({\n        targets: [\n          links[0],\n          links[1],\n          links[2],\n          links[3],\n        ],\n        opacity: 1,\n        duration: 500,//anime.stagger(200),\n        easing: 'easeInSine',\n        scale: [\n          {value: 1.01, easing: 'easeInQuad', duration: 200},\n          {value: 1, easing: 'easeOutQuad', duration: 200},\n        ],\n        // [\n        //   {value: 0, duration: 500},\n        //   {value: 1, easing: 'easeInSine', duration: 500},\n        // ],\n        delay: anime.stagger(200, {start: 1000}),\n      })\n\n      setTimeout(() => {\n        document.querySelector(links[0]).classList.add('active')\n      }, 1800)\n      // setTimeout(() => {\n        // document.querySelector(links[0]).classList.add(\"active\")\n      // }, 750)\n  }\n\n  componentWillReceiveProps(nextProps) {\n\n      const { pageContentSelector } = nextProps\n      if (pageContentSelector) {\n        this.AnimatePageContent(pageContentSelector, 1250)\n      }\n  }\n\n  textWrapper = (text, className) => {\n    return <span dangerouslySetInnerHTML={{__html: text.replace(/\\S/g, \"<span class='\"+className+\"'>$&</span>\")}}/>\n  }\n\n  setActive = e => {\n    const previousActive = document.querySelector('.nav-links .active')\n    // previousActive.animationName = ''\n    // previousActive.animationName = null\n    // e.target.style.color = 'rgba(255, 254, 255, 0.5)'\n    // previousActive.style.marginRight = '0px'\n    previousActive.classList.remove('active')\n\n    const target = e.target\n\n    // var newone = e.target.cloneNode(true);\n    // e.target.style.color = 'rgba(255, 254, 255, 0.5)'\n    // e.target.style.marginRight = '0px'\n    setTimeout(() => target.classList.add('active'), 50)\n    // e.target.parentNode.replaceChild(newone, e.target);\n  }\n\n  render() {\n    console.log(\"render\", this.state)\n    const {currentPage} = this.state\n    return (\n      <Container>\n              <Router history={this.props.history}>\n        <Row className=\"center-row pt-5\">\n          <div className=\"top-padding\"></div>\n          <Col sm={2} className=\"leftSide\">\n            <img src=\"/logofinal.png\" className=\"App-logo\" alt=\"logo\" />\n            <div className=\"nav-links\">\n              <Link className=\"defaultOpaque\" onClick={this.setActive} to={this.props.routes.projects}>Projects</Link>\n              <Link className=\"defaultOpaque\" onClick={this.setActive} to={this.props.routes.about}>About</Link>\n              <a className=\"defaultOpaque\" onClick={this.setActive} href=\"#\">Services</a>\n              <a className=\"defaultOpaque\" onClick={this.setActive} href=\"#\">Contact</a>\n            </div>\n          </Col>\n          <Col sm={10} className=\"rightSide\">\n            <h1 className=\"\">{this.textWrapper('Harry Johnson Web Development', 'defaultOpaque letter')}</h1>\n            <h2 className=\"\">{this.textWrapper('Full-stack developer', 'defaultOpaque letter')}</h2>\n            <div className=\"mt-3 mx-n3\">\n              {\n                \n                (currentPage && currentPage.value) || <ProjectsPage/>\n              }\n\n                {/**<Switch>\n                                              <Route exact path={this.props.routes.home} component={ProjectsPage}/>\n                                              <Route exact path={this.props.routes.projects}  component={ProjectsPage}/>\n                                              <Route exact path={this.props.routes.projectsSAB}  component={projectsSABPage}/>\n                                              <Route exact path={this.props.routes.projectsAB}  component={projectsABPage}/>\n                                              <Route exact path={this.props.routes.projectsSamAndMax}  component={projectsSamAndMaxPage}/>\n                                              <Route exact path={this.props.routes.projectsSPG}  component={ProjectsSPGPage}/>\n                                            </Switch>\n                            **/}            </div>\n          </Col>\n        </Row>\n              </Router>\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  history: state.site.history,\n  routes: state.site.routes,\n  pageContentSelector: state.site.pageContentSelector,\n});\n\nexport default connect(mapStateToProps, { setPageOpacity })(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\n// import './css/xxs.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  rootElement\n);\n// ReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}